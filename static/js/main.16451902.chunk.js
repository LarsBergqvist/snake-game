(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{12:function(e,t,r){},26:function(e,t,r){},33:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),c=r(7),a=r.n(c),o=(r(26),function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,36)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;r(e),n(e),i(e),c(e),a(e)}))}),s=r(4),u="INIT_GAME",h="HIGHSCORE_LIST_LOADED",d="NAME_CHANGED",g="HIGHSCORE_LIST_SAVED",l="MOVE_SNAKE",b="CHANGE_DIRECTION";function p(e){return{type:b,direction:e}}function m(e){return{type:l,direction:e}}function f(e,t,r){var n=Object(s.a)(r.results).map((function(e){return{id:e.id,score:e.score}}));n.push({id:e,score:t}),n.sort((function(e,t){return function(e,t){return e.score>=t.score?-1:e.score<t.score?1:void 0}(e,t)}));var i=n.findIndex((function(t){return t.id===e}));return i>-1&&i+1<=r.maxSize?i:-1}function j(e,t,r){for(var n=[],i=0;i<e*e;i++){var c=Math.floor(i/e),a=i%e;0===a||a===e-1||0===c||c===e-1?n.push(1):n.push(0)}r&&(n[r.y*e+r.x]=2);for(var o=0;o<t.length;o++){var s=t[o].x,u=t[o].y*e+s;u<e*e&&(n[u]=3+o)}return n}function v(e,t,r){var n=3;r>30?n=1:r>20&&(n=2);for(var i=!1,c=void 0,a=function(){var r=Math.floor(Math.random()*(e-2*n)+n),a=Math.floor(Math.random()*(e-2*n)+n);-1===t.findIndex((function(e){return e.x===r&&e.y===a}))&&(i=!0,c={x:r,y:a})};!i;)a();return c}function O(e,t){return!(t===e||2===t&&1===e||1===t&&2===e||3===t&&4===e||4===t&&3===e)}function x(e,t){var r=t.x,n=t.y;return 3===e?n--:4===e?n++:2===e?r--:r++,{x:r,y:n}}var S=[{name:"Snake Game",size:30,highscorelistid:"60ec9a48e10c1eec66e4dadb"}],w=r(35),N={points:0,gameStarted:!1,gameComplete:!1,gridViewModel:[],size:void 0,gameId:void 0,gameName:void 0,direction:1,snake:void 0,food:void 0,highScoreList:void 0,highScorePosition:-1,userName:void 0,userId:void 0,highScoreListSaved:!1,directions:[]};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var r=S[t.gameId].size,n=[{x:3,y:1},{x:2,y:1},{x:1,y:1},{x:0,y:5}],i=n.map((function(e){return{x:e.x+1,y:r/2}})),c=v(r,i,0);return Object.assign({},N,{gameId:t.gameId,size:r,gameName:S[t.gameId].name,imageNumber:t.imageNumber,highScoreListId:S[t.gameId].highscorelistid,food:c,gridViewModel:j(S[t.gameId].size,i,c),gameStarted:!0,snake:i});case b:if(t.direction===e.direction[0])return e;var a=Object(s.a)(e.directions);return a.length>=3&&a.pop(),a.push(t.direction),Object.assign({},e,{directions:a});case l:if(e.gameComplete||!e.gameStarted)return e;var o=Object(s.a)(e.directions),p=o.shift(),m=e.direction;if(p){if(!O(m,p))return Object.assign({},e,{directions:o});m=p}var k=Object(s.a)(e.snake),y=x(m,k[0]),C=e.gridViewModel[y.y*e.size+y.x];if(1===C||C>=3){if(e.highScoreList){var I=Object(w.a)(),L=f(I,e.points,e.highScoreList);return L>-1?Object.assign({},e,{highScorePosition:L+1,gameComplete:!0,userId:I,directions:o}):Object.assign({},e,{highScorePosition:L+1,gameComplete:!0,directions:o})}return Object.assign({},e,{gameComplete:!0,directions:o})}var D=e.gameLoopInterval,E=e.points,M=2===C;M?E++:k.pop(),k.unshift(y);var z=M?v(e.size,k,e.points):Object.assign({},e.food),T=j(e.size,k,z);return Object.assign({},e,{snake:k,gridViewModel:T,food:z,points:E,direction:m,directions:o,gameLoopInterval:D});case h:return Object.assign({},e,{highScoreList:t.highScoreList});case d:return Object.assign({},e,{userName:t.name});case g:return Object.assign({},e,{highScoreListSaved:!0,highScoreList:t.highScoreList});default:return e}},y=r(3),C=r(9),I=r(15),L=r(16),D=r(17),E=r(21),M=r(19),z=(r(12),r(0)),T=function(e){if(!e.highScoreList)return Object(z.jsx)(z.Fragment,{});var t=e.highScoreList.results.map((function(t,r){var n="";return e.userId&&t.id===e.userId&&(n="user-row-in-highscore"),Object(z.jsxs)("tr",{className:n,children:[Object(z.jsxs)("td",{children:["#",r+1]}),Object(z.jsx)("td",{children:t.userName}),Object(z.jsx)("td",{className:"date-column",children:new Date(t.utcDateTime).toLocaleDateString()}),Object(z.jsx)("td",{children:t.score})]},r+1)}));return Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)("div",{children:[Object(z.jsx)("h3",{children:e.highScoreList.name}),Object(z.jsxs)("table",{className:"highscoretable",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"Position"}),Object(z.jsx)("th",{children:"Name"}),Object(z.jsx)("th",{className:"date-column",children:"Date"}),Object(z.jsx)("th",{children:e.highScoreList.unit})]})}),Object(z.jsx)("tbody",{children:t})]})]})})},P=r(20),_=r(2),A=r.n(_),V=r(5);function G(e,t){return F.apply(this,arguments)}function F(){return(F=Object(V.a)(A.a.mark((function e(t,r){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=setInterval((function(){r().gameComplete?clearInterval(n):t(m())}),100);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return q.apply(this,arguments)}function q(){return(q=Object(V.a)(A.a.mark((function e(t,r){var n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=="https://highscore-service-lb-api.azurewebsites.net".length){e.next=2;break}return e.abrupt("return");case 2:return n="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId),e.prev=3,e.next=6,J(n);case 6:i=e.sent,t({type:h,highScoreList:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Network request failed");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function R(e,t){return U.apply(this,arguments)}function U(){return(U=Object(V.a)(A.a.mark((function e(t,r){var n,i,c,a,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=="https://highscore-service-lb-api.azurewebsites.net".length){e.next=2;break}return e.abrupt("return");case 2:if(n="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId,"/game-results"),(i=r()).userName&&0!==i.userName.length){e.next=6;break}return e.abrupt("return");case 6:return c={userName:i.userName,score:i.points,id:i.userId},e.prev=7,e.next=10,B(n,c);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),console.error("Network request failed3"),e.abrupt("return");case 16:return a="".concat("https://highscore-service-lb-api.azurewebsites.net","/highscore-lists/").concat(r().highScoreListId),e.next=19,J(a);case 19:o=e.sent,t({type:g,highScoreList:o});case 21:case"end":return e.stop()}}),e,null,[[7,12]])})))).apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return(K=Object(V.a)(A.a.mark((function e(t){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{headers:{ApiKey:"".concat("fe9f18bf-2d7b-4bdb-954e-4cfd83d66217")}});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Network request failed");case 6:return e.next=8,r.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),Error("Network request failed");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function B(e,t){return X.apply(this,arguments)}function X(){return(X=Object(V.a)(A.a.mark((function e(t,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json",ApiKey:"".concat("fe9f18bf-2d7b-4bdb-954e-4cfd83d66217")},body:JSON.stringify(r)});case 3:if(e.sent.ok){e.next=6;break}throw Error("Network request failed");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),Error("Network request failed");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var Y=Object(y.b)((function(e){return{highScorePosition:e.highScorePosition,highScoreList:e.highScoreList}}),(function(e){return{onSubmitNameToHighScore:function(){e(R)},onNameChanged:function(t){e(function(e){return{type:d,name:e}}(t))}}}))((function(e){var t=Object(n.useState)(""),r=Object(P.a)(t,2),i=r[0],c=r[1];return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{children:["YOU MADE IT TO #",e.highScorePosition," on the leaderboard!"]}),"Enter your name:",Object(z.jsx)("input",{type:"text",minLength:"3",maxLength:"25",required:!0,onChange:function(t){c(t.target.value),e.onNameChanged(t.target.value)}}),Object(z.jsx)("div",{children:i.length>=3&&i.length<=25&&Object(z.jsx)("button",{className:"game-button",onClick:function(){return e.onSubmitNameToHighScore(i)},children:"Submit"})})]})})),Q=function(e){return e.gameStarted?e.gameComplete?Object(z.jsxs)("div",{className:"game-status",children:[Object(z.jsx)("div",{children:Object(z.jsx)("b",{children:"GAME OVER!"})}),Object(z.jsxs)("div",{children:["You got ",e.points," points"]}),e.highScorePosition>0&&!e.highScoreListSaved&&Object(z.jsx)(Y,{}),e.highScorePosition>0&&e.highScoreListSaved&&Object(z.jsx)(T,{highScoreList:e.highScoreList,userId:e.userId}),Object(z.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(0)},children:"Restart"})]}):Object(z.jsxs)("div",{className:"game-status",children:["Score: ",Object(z.jsx)("b",{children:e.points}),Object(z.jsx)("div",{className:"game-instructions",children:Object(z.jsx)("div",{children:"Use swipe or arrow keys to change direction"})})]}):Object(z.jsx)("div",{children:Object(z.jsx)("button",{className:"game-button",onClick:function(){return e.onInitGame(0)},children:"Start game"})})};Q.defaultProps={gameStarted:!1};var W=Object(y.b)((function(e){return{points:e.points,gameComplete:e.gameComplete,highScorePosition:e.highScorePosition,highScoreListSaved:e.highScoreListSaved,highScoreList:e.highScoreList,userId:e.userId,gameStarted:e.gameStarted}}),(function(e){return{onInitGame:function(t){e(function(e){return{type:u,gameId:e}}(t)),e(H),e(G)}}}))(Q),Z=r(10),$=function(e){return 0===e?{backgroundColor:"white",outline:"1px solid lightgray",outlineOffset:"-1px"}:e>=3?{backgroundColor:"rgba(0,0,0, ".concat(Math.max(.2,1/(.6*(e-2))),")")}:2===e?{backgroundColor:"green"}:1===e?{backgroundColor:"red"}:void 0},ee=function(e){var t=e.id;return Object(z.jsx)("div",{className:"tile",style:$(t)})},te=r(18),re=Object(y.b)((function(e){return{gridViewModel:e.gridViewModel,size:e.size}}),(function(e){return{onChangeDirection:function(t){e(p(t))}}}))((function(e){var t=300/e.size,r={width:"".concat(e.size*t,"px")},n={gridTemplateColumns:"repeat(".concat(e.size,",").concat(t,"px)")},i=Object(te.useSwipeable)(Object(Z.a)({onSwipedRight:function(){return e.onChangeDirection(1)},onSwipedLeft:function(){return e.onChangeDirection(2)},onSwipedUp:function(){return e.onChangeDirection(3)},onSwipedDown:function(){return e.onChangeDirection(4)}},{delta:5,preventDefaultTouchmoveEvent:!0,trackTouch:!0,trackMouse:!1,rotationAngle:0}));return Object(z.jsx)("div",Object(Z.a)(Object(Z.a)({},i),{},{className:"tile-wrapper",style:r,children:Object(z.jsx)("div",{className:"tile-container",style:n,children:e.gridViewModel.map((function(e,t){return Object(z.jsx)(ee,{id:e},t)}))})}))})),ne=function(e){return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)("div",{children:Object(z.jsx)("h2",{children:e.gameName})})})},ie=function(e){Object(E.a)(r,e);var t=Object(M.a)(r);function r(e){return Object(L.a)(this,r),t.call(this,e)}return Object(D.a)(r,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){switch(t.keyCode){case 38:e.props.onChangeDirection(3);break;case 40:e.props.onChangeDirection(4);break;case 37:e.props.onChangeDirection(2);break;case 39:e.props.onChangeDirection(1)}!e.props.gameComplete&&e.props.gameStarted&&t.preventDefault()}),!1)}},{key:"render",value:function(){return Object(z.jsxs)("div",{className:"game",children:[Object(z.jsx)(ne,{gameName:this.props.gameName}),Object(z.jsx)(W,{}),Object(z.jsx)(re,{})]})}}]),r}(i.a.Component);ie.defaultProps={gameStarted:!1,gameComplete:!1};var ce=Object(y.b)((function(e){return{gameName:e.gameName,gameComplete:e.gameComplete,gameStarted:e.gameStarted}}),(function(e){return{onChangeDirection:function(t){e(p(t))}}}))(ie),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.b,oe=Object(C.c)(k,ae(Object(C.a)(I.a)));a.a.render(Object(z.jsx)(y.a,{store:oe,children:Object(z.jsx)(ce,{})}),document.getElementById("root")),o()}},[[33,1,2]]]);
//# sourceMappingURL=main.16451902.chunk.js.map